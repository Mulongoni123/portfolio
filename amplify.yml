version: 1
frontend:
  phases:
    preBuild:
      commands:
        # Install .NET 8.0 using official script (works on Amazon Linux)
        - curl -L https://dot.net/v1/dotnet-install.sh -o dotnet-install.sh
        - chmod +x dotnet-install.sh
        - ./dotnet-install.sh --channel 8.0 --install-dir /root/.dotnet
        - export DOTNET_ROOT=/root/.dotnet
        - export PATH=$PATH:/root/.dotnet
        # Verify installation
        - dotnet --version
        # Restore dependencies
        - dotnet restore
    build:
      commands:
        # Build and publish
        - dotnet publish -c Release -o ./dist
  artifacts:
    baseDirectory: /dist/wwwroot
    files:
      - '**/*'